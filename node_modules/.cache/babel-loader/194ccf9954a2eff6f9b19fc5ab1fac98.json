{"ast":null,"code":"import _classCallCheck from \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/src/entries/chat/index.jsx\";\nimport React, { Component } from \"react\";\nimport { ActionsWrapper, ChatWrapper } from \"entries/chat/wrappers\";\nimport { CallWindowComponent } from \"shared/components\";\nimport PeerConnection from \"utils/PeerConnection.js\";\nimport { connect } from \"react-redux\";\nimport { bindActionCreators } from \"redux\";\nimport * as socketActions from \"redux/actions/socket\";\n\nvar HomeEntry =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(HomeEntry, _Component);\n\n  function HomeEntry() {\n    _classCallCheck(this, HomeEntry);\n\n    return _possibleConstructorReturn(this, _getPrototypeOf(HomeEntry).apply(this, arguments));\n  }\n\n  _createClass(HomeEntry, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var socketActions = this.props.socketActions;\n      socketActions.startChannel();\n    }\n  }, {\n    key: \"startCall\",\n    value: function startCall(isCaller, friendID, config) {\n      var _this = this;\n\n      this.config = config;\n      this.pc = new PeerConnection(friendID).on(\"localStream\", function (src) {\n        var newState = {\n          callWindow: \"active\",\n          localSrc: src\n        };\n        if (!isCaller) newState.callModal = \"\";\n\n        _this.setState(newState);\n      }).on(\"peerStream\", function (src) {\n        return _this.setState({\n          peerSrc: src\n        });\n      }).start(isCaller, config);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var videoCallData = this.props.videoCallData;\n      var calling = videoCallData.calling;\n      var _this$state = this.state,\n          localSrc = _this$state.localSrc,\n          peerSrc = _this$state.peerSrc;\n      return React.createElement(\"div\", {\n        className: \"chat-wrapper\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      }, calling && React.createElement(\"div\", {\n        className: \"call-container\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 41\n        },\n        __self: this\n      }, React.createElement(\"p\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 42\n        },\n        __self: this\n      }, \"Tem algu\\xE9m ligando\"), React.createElement(\"button\", {\n        onClick: this.handleAceptCall,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43\n        },\n        __self: this\n      }, \"aceitar\"), React.createElement(\"button\", {\n        onClick: this.handleCancelCall,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44\n        },\n        __self: this\n      }, \"cancelar\")), React.createElement(CallWindowComponent, {\n        status: \"calling\",\n        localSrc: localSrc,\n        peerSrc: peerSrc,\n        config: this.config,\n        mediaDevice: this.pc.mediaDevice,\n        endCall: this.endCallHandler,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 49\n        },\n        __self: this\n      }), React.createElement(ActionsWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }), React.createElement(ChatWrapper, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }));\n    }\n  }]);\n\n  return HomeEntry;\n}(Component);\n\nvar mapDispatchToProps = function mapDispatchToProps(dispatch) {\n  return {\n    socketActions: bindActionCreators(socketActions, dispatch)\n  };\n};\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    videoCallData: state.videoCall\n  };\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(HomeEntry);","map":{"version":3,"sources":["/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/src/entries/chat/index.jsx"],"names":["React","Component","ActionsWrapper","ChatWrapper","CallWindowComponent","PeerConnection","connect","bindActionCreators","socketActions","HomeEntry","props","startChannel","isCaller","friendID","config","pc","on","src","newState","callWindow","localSrc","callModal","setState","peerSrc","start","videoCallData","calling","state","handleAceptCall","handleCancelCall","mediaDevice","endCallHandler","mapDispatchToProps","dispatch","mapStateToProps","videoCall"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\n\nimport { ActionsWrapper, ChatWrapper } from \"entries/chat/wrappers\";\nimport { CallWindowComponent } from \"shared/components\";\n\nimport PeerConnection from \"utils/PeerConnection.js\";\n\nimport { connect } from \"react-redux\";\n\nimport { bindActionCreators } from \"redux\";\n\nimport * as socketActions from \"redux/actions/socket\";\n\nclass HomeEntry extends Component {\n\tcomponentDidMount() {\n\t\tconst { socketActions } = this.props;\n\n\t\tsocketActions.startChannel();\n\t}\n\n\tstartCall(isCaller, friendID, config) {\n\t\tthis.config = config;\n\t\tthis.pc = new PeerConnection(friendID)\n\t\t\t.on(\"localStream\", src => {\n\t\t\t\tconst newState = { callWindow: \"active\", localSrc: src };\n\t\t\t\tif (!isCaller) newState.callModal = \"\";\n\t\t\t\tthis.setState(newState);\n\t\t\t})\n\t\t\t.on(\"peerStream\", src => this.setState({ peerSrc: src }))\n\t\t\t.start(isCaller, config);\n\t}\n\n\trender() {\n\t\tconst { videoCallData } = this.props;\n\t\tconst { calling } = videoCallData;\n\t\tconst { localSrc, peerSrc } = this.state;\n\n\t\treturn (\n\t\t\t<div className=\"chat-wrapper\">\n\t\t\t\t{calling && (\n\t\t\t\t\t<div className=\"call-container\">\n\t\t\t\t\t\t<p>Tem algu√©m ligando</p>\n\t\t\t\t\t\t<button onClick={this.handleAceptCall}>aceitar</button>\n\t\t\t\t\t\t<button onClick={this.handleCancelCall}>\n\t\t\t\t\t\t\tcancelar\n\t\t\t\t\t\t</button>\n\t\t\t\t\t</div>\n\t\t\t\t)}\n\t\t\t\t<CallWindowComponent\n\t\t\t\t\tstatus=\"calling\"\n\t\t\t\t\tlocalSrc={localSrc}\n\t\t\t\t\tpeerSrc={peerSrc}\n\t\t\t\t\tconfig={this.config}\n\t\t\t\t\tmediaDevice={this.pc.mediaDevice}\n\t\t\t\t\tendCall={this.endCallHandler}\n\t\t\t\t/>\n\t\t\t\t<ActionsWrapper />\n\t\t\t\t<ChatWrapper />\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nconst mapDispatchToProps = dispatch => {\n\treturn {\n\t\tsocketActions: bindActionCreators(socketActions, dispatch)\n\t};\n};\n\nconst mapStateToProps = state => {\n\treturn {\n\t\tvideoCallData: state.videoCall\n\t};\n};\n\nexport default connect(\n\tmapStateToProps,\n\tmapDispatchToProps\n)(HomeEntry);\n"]},"metadata":{},"sourceType":"module"}