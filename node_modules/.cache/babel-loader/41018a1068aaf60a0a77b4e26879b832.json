{"ast":null,"code":"import _classCallCheck from \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/src/entries/chat/containers/message-list/index.jsx\";\nimport React, { Component } from 'react';\nimport { MessageComponent, MessageSketch, TimeTagComponent } from 'entries/chat/components';\nimport moment from 'moment';\nimport _ from 'lodash';\n\nvar MessageListContainer =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(MessageListContainer, _Component);\n\n  function MessageListContainer() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, MessageListContainer);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(MessageListContainer)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _this.getItems = function () {\n      var items = _this.props.items;\n      var messages = [];\n\n      var aggregatedItems = _.groupBy(items, function (item) {\n        return moment(item.dateTime).utc().startOf('day').format();\n      });\n\n      _.mapKeys(aggregatedItems, function (value, key) {\n        var item = {\n          items: value\n        };\n        var diff = moment(new Date()).diff(moment(key), 'days');\n\n        if (diff <= 6) {\n          if (diff === 0) {\n            item.timeTag = 'today';\n          } else if (diff === 1) {\n            item.timeTag = 'yesterday';\n          } else {\n            item.timeTag = moment(key).format('dddd');\n          }\n        } else {\n          item.timeTag = moment(key).format('DD/MM/YYYY');\n        }\n\n        messages.push(item);\n      });\n\n      return messages;\n    };\n\n    return _this;\n  }\n\n  _createClass(MessageListContainer, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          isFetching = _this$props.isFetching,\n          onMouseOver = _this$props.onMouseOver,\n          onFocus = _this$props.onFocus,\n          handleDeleteMessage = _this$props.handleDeleteMessage;\n      var messages = this.getItems();\n\n      if (isFetching) {\n        return React.createElement(\"div\", {\n          className: \"message-list\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 63\n          },\n          __self: this\n        }, React.createElement(MessageSketch, {\n          left: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 66\n          },\n          __self: this\n        }), React.createElement(MessageSketch, {\n          right: true,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 69\n          },\n          __self: this\n        }));\n      }\n\n      return React.createElement(\"div\", {\n        className: \"message-list\",\n        onMouseOver: onMouseOver,\n        onFocus: onFocus,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77\n        },\n        __self: this\n      }, messages.map(function (message, key) {\n        var timeTag = message.timeTag,\n            items = message.items;\n        var components = [];\n        components.push(React.createElement(TimeTagComponent, {\n          key: \"time-tag\".concat(key),\n          text: timeTag,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }));\n        items.forEach(function (item, key) {\n          var message = item.message,\n              dateTime = item.dateTime,\n              currentUserIsSender = item.currentUserIsSender,\n              _id = item._id,\n              isFetchingAction = item.isFetchingAction;\n          components.push(React.createElement(MessageComponent, {\n            key: \"message\".concat(key),\n            right: currentUserIsSender,\n            left: !currentUserIsSender,\n            text: message,\n            time: moment(dateTime).format('HH:mm'),\n            handleDelete: function handleDelete() {\n              handleDeleteMessage(_id);\n            },\n            isFetchingAction: isFetchingAction,\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 108\n            },\n            __self: this\n          }));\n        });\n        return components;\n      }));\n    }\n  }]);\n\n  return MessageListContainer;\n}(Component);\n\nexport { MessageListContainer as default };","map":{"version":3,"sources":["/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/src/entries/chat/containers/message-list/index.jsx"],"names":["React","Component","MessageComponent","MessageSketch","TimeTagComponent","moment","_","MessageListContainer","getItems","items","props","messages","aggregatedItems","groupBy","item","dateTime","utc","startOf","format","mapKeys","value","key","diff","Date","timeTag","push","isFetching","onMouseOver","onFocus","handleDeleteMessage","map","message","components","forEach","currentUserIsSender","_id","isFetchingAction"],"mappings":"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","sourcesContent":["import React, {\n\tComponent\n} from 'react';\n\nimport {\n\tMessageComponent,\n\tMessageSketch,\n\tTimeTagComponent\n} from 'entries/chat/components';\n\nimport moment from 'moment';\nimport _ from 'lodash';\n\nexport default class MessageListContainer extends Component {\n\tgetItems = () => {\n\t\tconst {\n\t\t\titems\n\t\t} = this.props;\n\n\t\tconst messages = [];\n\n\t\tconst aggregatedItems = _.groupBy(items, (item) => {\n\t\t\treturn moment(item.dateTime).utc().startOf('day').format();\n\t\t});\n\n\t\t_.mapKeys(aggregatedItems, (value, key) => {\n\t\t\tconst item = {\n\t\t\t\titems: value\n\t\t\t};\n\n\t\t\tconst diff = moment(new Date()).diff(moment(key), 'days');\n\n\t\t\tif (diff <= 6) {\n\t\t\t\tif (diff === 0) {\n\t\t\t\t\titem.timeTag = 'today';\n\t\t\t\t} else if (diff === 1) {\n\t\t\t\t\titem.timeTag = 'yesterday';\n\t\t\t\t} else {\n\t\t\t\t\titem.timeTag = moment(key).format('dddd');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\titem.timeTag = moment(key).format('DD/MM/YYYY');\n\t\t\t}\n\n\t\t\tmessages.push(item);\n\t\t});\n\n\t\treturn messages;\n\t}\n\n\trender () {\n\t\tconst {\n\t\t\tisFetching,\n\t\t\tonMouseOver,\n\t\t\tonFocus,\n\t\t\thandleDeleteMessage\n\t\t} = this.props;\n\n\t\tconst messages = this.getItems();\n\n\t\tif (isFetching) {\n\t\t\treturn (\n\t\t\t\t<div\n\t\t\t\t\tclassName='message-list'\n\t\t\t\t>\n\t\t\t\t\t<MessageSketch\n\t\t\t\t\t\tleft\n\t\t\t\t\t/>\n\t\t\t\t\t<MessageSketch\n\t\t\t\t\t\tright\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t);\n\t\t}\n\n\t\treturn (\n\t\t\t<div\n\t\t\t\tclassName='message-list'\n\t\t\t\tonMouseOver={onMouseOver}\n\t\t\t\tonFocus={onFocus}\n\t\t\t>\n\t\t\t\t{\n\t\t\t\t\tmessages.map((message, key) => {\n\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\ttimeTag,\n\t\t\t\t\t\t\titems\n\t\t\t\t\t\t} = message;\n\n\t\t\t\t\t\tconst components = [];\n\n\t\t\t\t\t\tcomponents.push(\n\t\t\t\t\t\t\t<TimeTagComponent\n\t\t\t\t\t\t\t\tkey={`time-tag${key}`}\n\t\t\t\t\t\t\t\ttext={timeTag}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\titems.forEach((item, key) => {\n\t\t\t\t\t\t\tconst {\n\t\t\t\t\t\t\t\tmessage,\n\t\t\t\t\t\t\t\tdateTime,\n\t\t\t\t\t\t\t\tcurrentUserIsSender,\n\t\t\t\t\t\t\t\t_id,\n\t\t\t\t\t\t\t\tisFetchingAction\n\t\t\t\t\t\t\t} = item;\n\n\t\t\t\t\t\t\tcomponents.push(\n\t\t\t\t\t\t\t\t<MessageComponent\n\t\t\t\t\t\t\t\t\tkey={`message${key}`}\n\t\t\t\t\t\t\t\t\tright={currentUserIsSender}\n\t\t\t\t\t\t\t\t\tleft={!currentUserIsSender}\n\t\t\t\t\t\t\t\t\ttext={message}\n\t\t\t\t\t\t\t\t\ttime={moment(dateTime).format('HH:mm')}\n\t\t\t\t\t\t\t\t\thandleDelete={() => {\n\t\t\t\t\t\t\t\t\t\thandleDeleteMessage(_id);\n\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\tisFetchingAction={isFetchingAction}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\tcomponents\n\t\t\t\t\t\t);\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t</div>\n\t\t);\n\t}\n}\n"]},"metadata":{},"sourceType":"module"}