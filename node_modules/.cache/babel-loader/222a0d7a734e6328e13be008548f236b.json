{"ast":null,"code":"import _regeneratorRuntime from \"/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\n\nvar _marked =\n/*#__PURE__*/\n_regeneratorRuntime.mark(signInPostFetch),\n    _marked2 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(signUpPostFetch),\n    _marked3 =\n/*#__PURE__*/\n_regeneratorRuntime.mark(verifyNicknameGetFetch);\n\nimport { put, takeLatest } from \"redux-saga/effects\";\nimport { toast } from \"react-toastify\";\nimport { sendRequest, login } from \"modules/utils\";\nimport { POST_SIGNUP, POST_SIGNIN, GET_VERIFY_NICKNAME } from \"redux/constants/auth\";\nimport * as authActions from \"redux/actions/auth\";\nimport * as formActions from \"redux/actions/form\";\nimport constants from \"modules/constants\";\n\nfunction signInPostFetch(props) {\n  var params, body, response;\n  return _regeneratorRuntime.wrap(function signInPostFetch$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          params = props.params;\n          body = params.body;\n          _context.prev = 2;\n          _context.next = 5;\n          return sendRequest({\n            url: \"\".concat(constants.API.ROOT).concat(constants.API.ACTIONS.AUTH_SIGNIN),\n            method: constants.API.METHODS.POST,\n            body: body\n          });\n\n        case 5:\n          response = _context.sent;\n          _context.next = 8;\n          return put(authActions.postSignInReceived({\n            errors: response.errors\n          }));\n\n        case 8:\n          if (response.success && response.token && response.user) {\n            login(response.token, response.user);\n          }\n\n          _context.next = 16;\n          break;\n\n        case 11:\n          _context.prev = 11;\n          _context.t0 = _context[\"catch\"](2);\n          _context.next = 15;\n          return put(authActions.postSignInReceived());\n\n        case 15:\n          toast.error(constants.LABELS.MAIN.GLOBAL_ERROR);\n\n        case 16:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _marked, this, [[2, 11]]);\n}\n\nfunction signUpPostFetch(props) {\n  var params, formName, body, response;\n  return _regeneratorRuntime.wrap(function signUpPostFetch$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          params = props.params, formName = props.formName;\n          body = params.body;\n          _context2.prev = 2;\n          _context2.next = 5;\n          return sendRequest({\n            url: \"\".concat(constants.API.ROOT).concat(constants.API.ACTIONS.AUTH_SIGNUP),\n            method: constants.API.METHODS.POST,\n            body: body\n          });\n\n        case 5:\n          response = _context2.sent;\n          _context2.next = 8;\n          return put(formActions.setFormError(formName, {\n            errors: response.errors\n          }));\n\n        case 8:\n          _context2.next = 10;\n          return put(authActions.postSignUpReceived());\n\n        case 10:\n          if (response.success && response.token && response.user) {\n            login(response.token, response.user);\n          }\n\n          _context2.next = 19;\n          break;\n\n        case 13:\n          _context2.prev = 13;\n          _context2.t0 = _context2[\"catch\"](2);\n          console.log(_context2.t0);\n          _context2.next = 18;\n          return put(authActions.postSignUpReceived());\n\n        case 18:\n          toast.error(constants.LABELS.MAIN.GLOBAL_ERROR);\n\n        case 19:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _marked2, this, [[2, 13]]);\n}\n\nfunction verifyNicknameGetFetch(props) {\n  var params, body, formName, response;\n  return _regeneratorRuntime.wrap(function verifyNicknameGetFetch$(_context3) {\n    while (1) {\n      switch (_context3.prev = _context3.next) {\n        case 0:\n          params = props.params;\n          body = params.body, formName = params.formName;\n          _context3.prev = 2;\n          _context3.next = 5;\n          return sendRequest({\n            url: \"\".concat(constants.API.ROOT).concat(constants.API.ACTIONS.VERIFY_NICKNAME),\n            method: constants.API.METHODS.GET,\n            query: body\n          });\n\n        case 5:\n          response = _context3.sent;\n          _context3.next = 8;\n          return put(formActions.setFormError(formName, {\n            errors: response.errors\n          }));\n\n        case 8:\n          _context3.next = 10;\n          return put(authActions.getVerifyNicknameReceived({\n            errors: response.errors\n          }));\n\n        case 10:\n          _context3.next = 18;\n          break;\n\n        case 12:\n          _context3.prev = 12;\n          _context3.t0 = _context3[\"catch\"](2);\n          console.log(_context3.t0);\n          _context3.next = 17;\n          return put(authActions.getVerifyNicknameReceived());\n\n        case 17:\n          toast.error(constants.LABELS.MAIN.GLOBAL_ERROR);\n\n        case 18:\n        case \"end\":\n          return _context3.stop();\n      }\n    }\n  }, _marked3, this, [[2, 12]]);\n}\n\nvar sagas = [takeLatest(POST_SIGNIN, signInPostFetch), takeLatest(POST_SIGNUP, signUpPostFetch), takeLatest(GET_VERIFY_NICKNAME, verifyNicknameGetFetch)];\nexport default sagas;","map":{"version":3,"sources":["/home/tulio/Documentos/projetosJs/privoce/react-socketio-nodejs-chatapp/client/src/redux/sagas/auth/index.js"],"names":["signInPostFetch","signUpPostFetch","verifyNicknameGetFetch","put","takeLatest","toast","sendRequest","login","POST_SIGNUP","POST_SIGNIN","GET_VERIFY_NICKNAME","authActions","formActions","constants","props","params","body","url","API","ROOT","ACTIONS","AUTH_SIGNIN","method","METHODS","POST","response","postSignInReceived","errors","success","token","user","error","LABELS","MAIN","GLOBAL_ERROR","formName","AUTH_SIGNUP","setFormError","postSignUpReceived","console","log","VERIFY_NICKNAME","GET","query","getVerifyNicknameReceived","sagas"],"mappings":";;;;yBAgBUA,e;;;yBA2BAC,e;;;yBA8BAC,sB;;AAzEV,SAASC,GAAT,EAAcC,UAAd,QAAgC,oBAAhC;AAEA,SAASC,KAAT,QAAsB,gBAAtB;AAEA,SAASC,WAAT,EAAsBC,KAAtB,QAAmC,eAAnC;AAEA,SACCC,WADD,EAECC,WAFD,EAGCC,mBAHD,QAIO,sBAJP;AAMA,OAAO,KAAKC,WAAZ,MAA6B,oBAA7B;AACA,OAAO,KAAKC,WAAZ,MAA6B,oBAA7B;AACA,OAAOC,SAAP,MAAsB,mBAAtB;;AAEA,SAAUb,eAAV,CAA0Bc,KAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AACSC,UAAAA,MADT,GACoBD,KADpB,CACSC,MADT;AAGSC,UAAAA,IAHT,GAGkBD,MAHlB,CAGSC,IAHT;AAAA;AAAA;AAMmB,iBAAMV,WAAW,CAAC;AAClCW,YAAAA,GAAG,YAAKJ,SAAS,CAACK,GAAV,CAAcC,IAAnB,SAA0BN,SAAS,CAACK,GAAV,CAAcE,OAAd,CAAsBC,WAAhD,CAD+B;AAElCC,YAAAA,MAAM,EAAET,SAAS,CAACK,GAAV,CAAcK,OAAd,CAAsBC,IAFI;AAGlCR,YAAAA,IAAI,EAAJA;AAHkC,WAAD,CAAjB;;AANnB;AAMQS,UAAAA,QANR;AAAA;AAYE,iBAAMtB,GAAG,CACRQ,WAAW,CAACe,kBAAZ,CAA+B;AAC9BC,YAAAA,MAAM,EAAEF,QAAQ,CAACE;AADa,WAA/B,CADQ,CAAT;;AAZF;AAkBE,cAAIF,QAAQ,CAACG,OAAT,IAAoBH,QAAQ,CAACI,KAA7B,IAAsCJ,QAAQ,CAACK,IAAnD,EAAyD;AACxDvB,YAAAA,KAAK,CAACkB,QAAQ,CAACI,KAAV,EAAiBJ,QAAQ,CAACK,IAA1B,CAAL;AACA;;AApBH;AAAA;;AAAA;AAAA;AAAA;AAAA;AAsBE,iBAAM3B,GAAG,CAACQ,WAAW,CAACe,kBAAZ,EAAD,CAAT;;AAtBF;AAuBErB,UAAAA,KAAK,CAAC0B,KAAN,CAAYlB,SAAS,CAACmB,MAAV,CAAiBC,IAAjB,CAAsBC,YAAlC;;AAvBF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA2BA,SAAUjC,eAAV,CAA0Ba,KAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AACSC,UAAAA,MADT,GAC8BD,KAD9B,CACSC,MADT,EACiBoB,QADjB,GAC8BrB,KAD9B,CACiBqB,QADjB;AAGSnB,UAAAA,IAHT,GAGkBD,MAHlB,CAGSC,IAHT;AAAA;AAAA;AAMmB,iBAAMV,WAAW,CAAC;AAClCW,YAAAA,GAAG,YAAKJ,SAAS,CAACK,GAAV,CAAcC,IAAnB,SAA0BN,SAAS,CAACK,GAAV,CAAcE,OAAd,CAAsBgB,WAAhD,CAD+B;AAElCd,YAAAA,MAAM,EAAET,SAAS,CAACK,GAAV,CAAcK,OAAd,CAAsBC,IAFI;AAGlCR,YAAAA,IAAI,EAAJA;AAHkC,WAAD,CAAjB;;AANnB;AAMQS,UAAAA,QANR;AAAA;AAYE,iBAAMtB,GAAG,CACRS,WAAW,CAACyB,YAAZ,CAAyBF,QAAzB,EAAmC;AAClCR,YAAAA,MAAM,EAAEF,QAAQ,CAACE;AADiB,WAAnC,CADQ,CAAT;;AAZF;AAAA;AAkBE,iBAAMxB,GAAG,CAACQ,WAAW,CAAC2B,kBAAZ,EAAD,CAAT;;AAlBF;AAoBE,cAAIb,QAAQ,CAACG,OAAT,IAAoBH,QAAQ,CAACI,KAA7B,IAAsCJ,QAAQ,CAACK,IAAnD,EAAyD;AACxDvB,YAAAA,KAAK,CAACkB,QAAQ,CAACI,KAAV,EAAiBJ,QAAQ,CAACK,IAA1B,CAAL;AACA;;AAtBH;AAAA;;AAAA;AAAA;AAAA;AAwBES,UAAAA,OAAO,CAACC,GAAR;AAxBF;AAyBE,iBAAMrC,GAAG,CAACQ,WAAW,CAAC2B,kBAAZ,EAAD,CAAT;;AAzBF;AA0BEjC,UAAAA,KAAK,CAAC0B,KAAN,CAAYlB,SAAS,CAACmB,MAAV,CAAiBC,IAAjB,CAAsBC,YAAlC;;AA1BF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AA8BA,SAAUhC,sBAAV,CAAiCY,KAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AACSC,UAAAA,MADT,GACoBD,KADpB,CACSC,MADT;AAGSC,UAAAA,IAHT,GAG4BD,MAH5B,CAGSC,IAHT,EAGemB,QAHf,GAG4BpB,MAH5B,CAGeoB,QAHf;AAAA;AAAA;AAMmB,iBAAM7B,WAAW,CAAC;AAClCW,YAAAA,GAAG,YAAKJ,SAAS,CAACK,GAAV,CAAcC,IAAnB,SACFN,SAAS,CAACK,GAAV,CAAcE,OAAd,CAAsBqB,eADpB,CAD+B;AAIlCnB,YAAAA,MAAM,EAAET,SAAS,CAACK,GAAV,CAAcK,OAAd,CAAsBmB,GAJI;AAKlCC,YAAAA,KAAK,EAAE3B;AAL2B,WAAD,CAAjB;;AANnB;AAMQS,UAAAA,QANR;AAAA;AAcE,iBAAMtB,GAAG,CACRS,WAAW,CAACyB,YAAZ,CAAyBF,QAAzB,EAAmC;AAClCR,YAAAA,MAAM,EAAEF,QAAQ,CAACE;AADiB,WAAnC,CADQ,CAAT;;AAdF;AAAA;AAoBE,iBAAMxB,GAAG,CACRQ,WAAW,CAACiC,yBAAZ,CAAsC;AACrCjB,YAAAA,MAAM,EAAEF,QAAQ,CAACE;AADoB,WAAtC,CADQ,CAAT;;AApBF;AAAA;AAAA;;AAAA;AAAA;AAAA;AA0BEY,UAAAA,OAAO,CAACC,GAAR;AA1BF;AA2BE,iBAAMrC,GAAG,CAACQ,WAAW,CAACiC,yBAAZ,EAAD,CAAT;;AA3BF;AA4BEvC,UAAAA,KAAK,CAAC0B,KAAN,CAAYlB,SAAS,CAACmB,MAAV,CAAiBC,IAAjB,CAAsBC,YAAlC;;AA5BF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAgCA,IAAMW,KAAK,GAAG,CACbzC,UAAU,CAACK,WAAD,EAAcT,eAAd,CADG,EAEbI,UAAU,CAACI,WAAD,EAAcP,eAAd,CAFG,EAGbG,UAAU,CAACM,mBAAD,EAAsBR,sBAAtB,CAHG,CAAd;AAMA,eAAe2C,KAAf","sourcesContent":["import { put, takeLatest } from \"redux-saga/effects\";\n\nimport { toast } from \"react-toastify\";\n\nimport { sendRequest, login } from \"modules/utils\";\n\nimport {\n\tPOST_SIGNUP,\n\tPOST_SIGNIN,\n\tGET_VERIFY_NICKNAME\n} from \"redux/constants/auth\";\n\nimport * as authActions from \"redux/actions/auth\";\nimport * as formActions from \"redux/actions/form\";\nimport constants from \"modules/constants\";\n\nfunction* signInPostFetch(props) {\n\tconst { params } = props;\n\n\tconst { body } = params;\n\n\ttry {\n\t\tconst response = yield sendRequest({\n\t\t\turl: `${constants.API.ROOT}${constants.API.ACTIONS.AUTH_SIGNIN}`,\n\t\t\tmethod: constants.API.METHODS.POST,\n\t\t\tbody\n\t\t});\n\n\t\tyield put(\n\t\t\tauthActions.postSignInReceived({\n\t\t\t\terrors: response.errors\n\t\t\t})\n\t\t);\n\n\t\tif (response.success && response.token && response.user) {\n\t\t\tlogin(response.token, response.user);\n\t\t}\n\t} catch (e) {\n\t\tyield put(authActions.postSignInReceived());\n\t\ttoast.error(constants.LABELS.MAIN.GLOBAL_ERROR);\n\t}\n}\n\nfunction* signUpPostFetch(props) {\n\tconst { params, formName } = props;\n\n\tconst { body } = params;\n\n\ttry {\n\t\tconst response = yield sendRequest({\n\t\t\turl: `${constants.API.ROOT}${constants.API.ACTIONS.AUTH_SIGNUP}`,\n\t\t\tmethod: constants.API.METHODS.POST,\n\t\t\tbody\n\t\t});\n\n\t\tyield put(\n\t\t\tformActions.setFormError(formName, {\n\t\t\t\terrors: response.errors\n\t\t\t})\n\t\t);\n\n\t\tyield put(authActions.postSignUpReceived());\n\n\t\tif (response.success && response.token && response.user) {\n\t\t\tlogin(response.token, response.user);\n\t\t}\n\t} catch (e) {\n\t\tconsole.log(e);\n\t\tyield put(authActions.postSignUpReceived());\n\t\ttoast.error(constants.LABELS.MAIN.GLOBAL_ERROR);\n\t}\n}\n\nfunction* verifyNicknameGetFetch(props) {\n\tconst { params } = props;\n\n\tconst { body, formName } = params;\n\n\ttry {\n\t\tconst response = yield sendRequest({\n\t\t\turl: `${constants.API.ROOT}${\n\t\t\t\tconstants.API.ACTIONS.VERIFY_NICKNAME\n\t\t\t}`,\n\t\t\tmethod: constants.API.METHODS.GET,\n\t\t\tquery: body\n\t\t});\n\n\t\tyield put(\n\t\t\tformActions.setFormError(formName, {\n\t\t\t\terrors: response.errors\n\t\t\t})\n\t\t);\n\n\t\tyield put(\n\t\t\tauthActions.getVerifyNicknameReceived({\n\t\t\t\terrors: response.errors\n\t\t\t})\n\t\t);\n\t} catch (e) {\n\t\tconsole.log(e);\n\t\tyield put(authActions.getVerifyNicknameReceived());\n\t\ttoast.error(constants.LABELS.MAIN.GLOBAL_ERROR);\n\t}\n}\n\nconst sagas = [\n\ttakeLatest(POST_SIGNIN, signInPostFetch),\n\ttakeLatest(POST_SIGNUP, signUpPostFetch),\n\ttakeLatest(GET_VERIFY_NICKNAME, verifyNicknameGetFetch)\n];\n\nexport default sagas;\n"]},"metadata":{},"sourceType":"module"}